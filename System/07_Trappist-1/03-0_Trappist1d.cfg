@Kopernicus:FOR[AfterSolarSystemExpand]
{
	useOnDemand = True
	Body
	{
		name = Trappist-1d
		finalizeOrbit = False
        randomMainMenuBody = False
        identifier = Trappist-1/Trappist-1d
		cacheFile = AfterSolarSystemExpand/System/07_Trappist-1/Cache/Trappist-1d.bin
		Template
		{
			name = Laythe
			removeOcean = True
			removePQSMods = LandControl, VertexHeightNoise, VertexSimplexHeightMap, VertexHeightNoiseVertHeight
		}
		Properties
		{
			displayName = #ASSEX_Trappist-1D_name//Trappist-1d
			description = #ASSEX_Trappist-1D_desc//Main sequence stars are energetic in their youth and emit a large number of flares. These violent flares are fatal to planets at a close distance. The violent flares will strip away their atmosphere bit by bit, eventually making the planet become dead.
 			radius = 4905670
			//mass = 2.317136E+24
            gravParameter = 154647510348800
			tidallyLocked = True
			albedo = 0.15
			isHomeWorld = False
			initialRotation = 20
			timewarpAltitudeLimits = 140000 140000 140000 140000 140000 140000 140000 140000
			biomeMap = AfterSolarSystemExpand/Textures/PluginData/007_Trappist-1d_Biomes.dds
			Biomes
			{
				Biome
				{
					name = 低地
					displayName = #ASSEX_Trappist-1D_Biome1
					value = 1.0
					color = RGB(100,100,100)
				}
				Biome
				{
					name = 高原
					displayName = #ASSEX_Trappist-1D_Biome2
					value = 1.0
					color = RGB(100,100,210)
				}
				Biome
				{
					name = 陨石坑
					displayName = #ASSEX_Trappist-1D_Biome3
					value = 1.0
					color = RGB(150,70,20)
				}
				Biome
				{
					name = 沟壑
					displayName = #ASSEX_Trappist-1D_Biome4
					value = 1.0
					color = RGB(150,255,220)
				}
				Biome
				{
					name = 丘陵
					displayName = #ASSEX_Trappist-1D_Biome5
					value = 1.0
					color = RGB(150,128,0)
				}
			}
			ScienceValues
			{
				landedDataValue = 48.2
				flyingLowDataValue = 47.9
				flyingHighDataValue = 47.6
				inSpaceLowDataValue = 47.2
				inSpaceHighDataValue = 46.8
				flyingAltitudeThreshold = 25000
				spaceAltitudeThreshold = 2200000
			}
		}
		Orbit
		{
			referenceBody =            Trappist-1
			semiMajorAxis =            3.331592000E+09
            eccentricity =             8.370000000E-03
			inclination =              8.989600000E+00  // 没办法用正常的89度倾角，行星没有自转轴
            meanAnomalyAtEpochD =      2.524553162E+01
            longitudeOfAscendingNode = 5.154552341E+01
            argumentOfPeriapsis =     -8.730000000E+00
			color =  				   RGB(115,113,116)
			cameraSmaRatioBounds =     0.03 500	
			iconTexture = AfterSolarSystemExpand/Textures/RockPlanet_icon.dds
		}
        ScaledVersion
        {
           	type = Atmospheric
			fadeStart = 100000
			fadeEnd = 102000
			OnDemand
			{
                texture = AfterSolarSystemExpand/Textures/PluginData/007_Trappist-1d_Color.dds
                normals = AfterSolarSystemExpand/Textures/PluginData/007_Trappist-1d_NRM.dds
			}
            Material
            {
                color = 1,1,1,1

                specColor = 0,0,0,1
                shininess = 0.03

				rimPower = 0.38
				rimBlend = 0.12
				rimColorRamp = AfterSolarSystemExpand/Textures/PluginData/007_Trappist-1eColorRamp.dds
            }
        }
		Atmosphere				
		{				
			enabled =	True			
			oxygen =	False			
			altitude =	140000			
			adiabaticIndex =	1.29			
			atmosphereMolarMass =	0.0436

				// CO2 97.62%
				// N2  2.10%
				// WaterVape 0.28%

			temperatureSeaLevel =	323			
			staticPressureASL =	0.595791			
			temperatureCurve				
			{				
				key =	0	273	0.00000E+00	5.49602E-04
				key =	7278	277	5.49602E-04	2.89310E-04
				key =	14191	279	2.89310E-04	0.00000E+00
				key =	20774	279	0.00000E+00	-6.36537E-04
				key =	27058	275	-6.36537E-04	-1.49601E-03
				key =	33074	266	-1.49601E-03	-1.90410E-03
				key =	38851	255	-1.90410E-03	-1.79695E-03
				key =	44416	245	-1.79695E-03	-1.10681E-03
				key =	49837	239	-1.10681E-03	-1.12381E-03
				key =	55176	233	-1.12381E-03	-1.13960E-03
				key =	60441	227	-1.13960E-03	-1.15473E-03
				key =	65637	221	-1.15473E-03	-1.16936E-03
				key =	70768	215	-1.16936E-03	-9.85804E-04
				key =	75840	210	-9.85804E-04	-9.96612E-04
				key =	80857	205	-9.96612E-04	-8.04667E-04
				key =	85828	201	-8.04667E-04	-8.11524E-04
				key =	90757	197	-8.11524E-04	-4.08497E-04
				key =	95653	195	-4.08497E-04	-4.10593E-04
				key =	100524	193	-4.10593E-04	-2.06101E-04
				key =	105376	192	-2.06101E-04	-2.06441E-04
				key =	110220	191	-2.06441E-04	0.00000E+00
				key =	115064	191	0.00000E+00	2.05888E-04
				key =	119921	192	2.05888E-04	2.04625E-04
				key =	124808	193	2.04625E-04	4.05104E-04
				key =	129745	195	4.05104E-04	5.98922E-04
				key =	134754	198	5.98922E-04	5.71864E-04
				key =	140000	201	5.71864E-04	0.00000E+00			
			}				
			temperatureSunMultCurve				
			{				
				key =	0	1.000	0.00000E+00	-5.85326E-05
				key =	7278	0.574	-5.85326E-05	-5.22205E-05
				key =	14191	0.213	-5.22205E-05	-4.17743E-05
				key =	20774	-0.062	-4.17743E-05	-2.78485E-05
				key =	27058	-0.237	-2.78485E-05	-1.04721E-05
				key =	33074	-0.300	-1.04721E-05	1.55790E-06
				key =	38851	-0.291	1.55790E-06	4.49236E-06
				key =	44416	-0.266	4.49236E-06	6.64084E-06
				key =	49837	-0.230	6.64084E-06	8.42854E-06
				key =	55176	-0.185	8.42854E-06	9.49668E-06
				key =	60441	-0.135	9.49668E-06	1.00077E-05
				key =	65637	-0.083	1.00077E-05	1.03294E-05
				key =	70768	-0.030	1.03294E-05	9.85804E-06
				key =	75840	0.020	9.85804E-06	8.96950E-06
				key =	80857	0.065	8.96950E-06	7.64434E-06
				key =	85828	0.103	7.64434E-06	5.88355E-06
				key =	90757	0.132	5.88355E-06	3.67647E-06
				key =	95653	0.150	3.67647E-06	1.23178E-06
				key =	100524	0.156	1.23178E-06	0.00000E+00
				key =	105376	0.156	0.00000E+00	0.00000E+00
				key =	110220	0.156	0.00000E+00	0.00000E+00
				key =	115064	0.156	0.00000E+00	0.00000E+00
				key =	119921	0.156	0.00000E+00	0.00000E+00
				key =	124808	0.156	0.00000E+00	0.00000E+00
				key =	129745	0.156	0.00000E+00	0.00000E+00
				key =	134754	0.156	0.00000E+00	0.00000E+00
				key =	140000	0.156	0.00000E+00	0.00000E+00			
			}				
			temperatureLatitudeBiasCurve				
			{				
				key =	0	22.26	0	0
				key =	38	0	-1.1283	-1.1283
				key =	90	-82.74	-1.8326	0
			}				
			temperatureLatitudeSunMultCurve				
			{				
				key =	0	118	0	0
				key =	38	100.19	-0.9026	-0.9026
				key =	90	34	-1.4661	0
			}				
			temperatureAxialSunBiasCurve				
			{				
				key =	0	0.28	0	-0.0049
				key =	44.73	0	-0.0069	-0.0069
				key =	134.73	-0.4	0	0
				key =	224.73	0	0.0069	0.0069
				key =	314.73	0.4	0	0
				key =	360	0.28	-0.0049	0
			}				
			temperatureAxialSunMultCurve				
			{				
				key =	0	0	0	0
				key =	38	0.5	0.02	0.02
				key =	90	1	0	0
			}				
			temperatureEccentricityBiasCurve				
			{				
				key =	0	0.05	0	-0.1
				key =	1	-0.05	-0.1	0
			}				
			pressureCurve				
			{				
				key =	0	5.95791E-01	0.00000E+00	-4.59087E-05
				key =	7278	3.35038E-01	-2.73018E-05	-2.73018E-05
				key =	14191	1.88406E-01	-1.61965E-05	-1.61965E-05
				key =	20774	1.05948E-01	-9.58264E-06	-9.58264E-06
				key =	27058	5.95791E-02	-5.65327E-06	-5.65327E-06
				key =	33074	3.35038E-02	-3.32503E-06	-3.32503E-06
				key =	38851	1.88406E-02	-1.94950E-06	-1.94950E-06
				key =	44416	1.05948E-02	-1.13936E-06	-1.13936E-06
				key =	49837	5.95791E-03	-6.52803E-07	-6.52803E-07
				key =	55176	3.35038E-03	-3.73278E-07	-3.73278E-07
				key =	60441	1.88406E-03	-2.13312E-07	-2.13312E-07
				key =	65637	1.05948E-03	-1.21809E-07	-1.21809E-07
				key =	70768	5.95791E-04	-6.94985E-08	-6.94985E-08
				key =	75840	3.35038E-04	-3.96139E-08	-3.96139E-08
				key =	80857	1.88406E-04	-2.25549E-08	-2.25549E-08
				key =	85828	1.05948E-04	-1.28262E-08	-1.28262E-08
				key =	90757	5.95791E-05	-7.28390E-09	-7.28390E-09
				key =	95653	3.35038E-05	-4.13031E-09	-4.13031E-09
				key =	100524	1.88406E-05	-2.33830E-09	-2.33830E-09
				key =	105376	1.05948E-05	-1.32149E-09	-1.32149E-09
				key =	110220	5.95791E-06	-7.45455E-10	-7.45455E-10
				key =	115064	3.35038E-06	-4.19691E-10	-4.19691E-10
				key =	119921	1.88406E-06	-2.35570E-10	-2.35570E-10
				key =	124808	1.05948E-06	-1.31661E-10	-1.31661E-10
				key =	129745	5.95791E-07	-7.32909E-11	-7.32909E-11
				key =	134754	3.35038E-07	-4.06463E-11	-4.06463E-11
				key =	140000	0.00000E+00	0.00000E+00	0.00000E+00				
			}	
			AtmosphereFromGround // The atmosphere effect that is seen on the horizon
			{
				DEBUG_alwaysUpdateAll = False // Whether all parameters should get recalculated and reapplied every frame.
				doScale = True // Whether the atmosphere mesh should be scaled automatically.
				innerRadius = 4902604 // The lower bound of the atmosphere effect.
				invWaveLength = 1.81510115,1.35464334,1.15132606,0.5
				outerRadius = 5028312 // The upper bound of the atmosphere effect.
				samples = 4
				transformScale = 1.02499998,1.02499998,1.02499998 // The scale of the atmosphere mesh in all three directions. Automatically set if doScale is enabled.
				waveLength = 0.861538708,0.926923215,0.965384722,0.5
				outerRadiusMult = 1.025 // A multiplier that automatically sets outerRadius based on the planets radius.
				innerRadiusMult = 0.975 // A multiplier that automatically sets innerRadius based on the planets radius.
			}			
		}				
		PQS
		{
			deactivateAltitude = 140000
			fadeStart = 102000
			fadeEnd = 122500
            materialType = AtmosphericTriplanarZoomRotation
            Material
			{
				factor = 8
				factorBlendWidth = 0.05
				factorRotation = 75
				saturation = 1.10
				contrast = 1.15
				tintColor = 1,1,1,0
				specularColor = 0.1,0.1,0.1,1
				albedoBrightness = 1

				steepPower = 1.52
				steepTexStart = 30000
				steepTexEnd = 60000
				steepTex = AfterSolarSystemExpand/Terrain/PluginData/Stone04.dds
				steepTexScale = 1,1
				steepTexOffset = 0,0
				steepBumpMap = AfterSolarSystemExpand/Terrain/PluginData/Stone04_NRM.dds
				steepBumpMapScale = 1,1
				steepBumpMapOffset = 0,0
				steepNearTiling = 1500
				steepTiling = 350

				lowTexScale = 1,1
				lowTexOffset = 0,0
				lowTiling = 1452000

				midTex = AfterSolarSystemExpand/Terrain/PluginData/Stone04.dds
				midTexScale = 1,1
				midTexOffset = 0,0
				midTiling = 150000
				midBumpMap = AfterSolarSystemExpand/Terrain/PluginData/Stone04_NRM.dds
				midBumpMapScale = 1,1
				midBumpMapOffset = 0,0
				midBumpTiling = 150000

				highTexScale = 1,1
				highTexOffset = 0,0
				highTiling = 148000

				lowStart = -1
				lowEnd = -1
				highStart = 1
				highEnd = 1

				globalDensity = 0
				planetOpacity = 1
				oceanFogDistance = 1000
			}
			FallbackMaterial
			{
				saturation = 1
				contrast = 1
				tintColor = 1,1,1,0
				texTiling = 4000
				texPower = 0.75
				multiPower = 0.75
				groundTexStart = 0
				groundTexEnd = 6000
				multiFactor = 24
				mainTex = BUILTIN/RockyGround
				mainTexScale = 1,1
				mainTexOffset = 0,0
				planetOpacity = 1
			}
			Mods
			{
				VertexColorMap
				{
					map = AfterSolarSystemExpand/Textures/PluginData/007_Trappist-1d_Color.dds
					order = 9999993
					enabled = true
				}                                                     
				VertexHeightMap
				{
					map = AfterSolarSystemExpand/Textures/PluginData/007_Trappist-1d_Height.dds
					offset = 0
					deformity = 29702.60
					scaleDeformityByRadius = False
					order = 10
					enabled = True
					name = _HeightNoise03
				}
			}
		}
	}
}